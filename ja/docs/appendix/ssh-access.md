# 付録. 計算ノードへのSSHアクセス

計算ノードへのSSHアクセス機能を使用することで、ジョブに割り当てられた計算ノードへログインすることが可能になります。
計算ノードへのSSHアクセス機能を使用するジョブを投入するときは、`-l USE_SSH=1`オプションを指定してジョブを実行してください。
また、計算ノードへのSSHアクセス機能を利用する場合はノードを占有する必要があるため、`-l rt_F`オプションを指定する必要があります。

例）ジョブスクリプトの例(use_ssh.sh)

```bash
#!/bin/bash

#$-l rt_F=2
#$-l USE_SSH=1
#$-v SSH_PORT=22222
#$-cwd

...
```

以下の環境変数を指定することで、計算ノードへのSSHアクセス機能のパタメタを変更することが可能です。

| 環境変数 | 説明 |
|:---|:---|
| SSH_PORT | 計算ノードで起動するSSHサービスのポート番号を指定(デフォルト: 2222)。 2200-2299 の範囲内で指定することが可能。|

ジョブが実行を開始したら、`qstat`コマンドにて割り当てられた計算ノード一覧を確認します。

```
[username@es1 ~]$ qstat -j 12345 | grep exec_host_list
exec_host_list        1:    g0001:80, g0002:80
```

ジョブ投入オプションで指定したポート番号を指定して、
インタラクティブノードから計算ノードへログインします。

```
[username@es1 ~]$ ssh -p 22222 g0001
[username@g0001 ~]$ 
```

!!! note
    ジョブを投入したユーザのみログインすることが可能です。

また、ジョブに割り当てられた計算ノード間でもログインすることが可能です。

```
[username@g0001 ~]$ ssh -p 22222 g0002
[username@g0002 ~]$
```

!!! note
    ジョブの実行が終了した場合、計算ノードへログインしているセッションは切断されます。
